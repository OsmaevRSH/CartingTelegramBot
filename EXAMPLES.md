# üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CartingBot

## –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/your-username/CartingBotPython.git
cd CartingBotPython

# –°–æ–∑–¥–∞–µ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º .env
cp env.example .env
nano .env  # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

# –ó–∞–ø—É—Å–∫–∞–µ–º
./run_bot.sh
```

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ–º
./run_bot.sh
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
python3 scripts/test_local_setup.py

# –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–∞—Ä—Å–µ—Ä—ã
python3 scripts/test_bot.py

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–¥–æ—Ä–æ–≤—å–µ
python3 scripts/health_check.py
```

## –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/your-username/CartingBotPython.git
cd CartingBotPython

# –°–æ–∑–¥–∞–µ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º .env
cp env.example .env
nano .env  # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
./scripts/deploy.sh
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
# –°—Ç–∞—Ç—É—Å
./scripts/manage.sh status

# –õ–æ–≥–∏
./scripts/manage.sh logs

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./scripts/manage.sh logs-f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./scripts/manage.sh restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
./scripts/manage.sh stop

# –ë—ç–∫–∞–ø
./scripts/manage.sh backup
```

## –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```bash
python3 scripts/show_db_stats.py
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞
===================================
üìÅ –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: data/races.db
üì¶ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 45.3 KB

üìà –û–ë–©–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
   üèÅ –í—Å–µ–≥–æ –∑–∞–µ–∑–¥–æ–≤: 125
   üë• –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 8
   üìÖ –î–Ω–µ–π —Å –∑–∞–µ–∑–¥–∞–º–∏: 15

üèÜ –¢–û–ü –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô:
    1. ID:123456789 - 45 –∑–∞–µ–∑–¥–æ–≤
    2. ID:987654321 - 32 –∑–∞–µ–∑–¥–∞
    3. ID:456789123 - 28 –∑–∞–µ–∑–¥–æ–≤
```

### –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
python3 scripts/clear_database.py

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
python3 scripts/clear_database_force.py
```

## –ü—Ä–∏–º–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ .env

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```env
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

### –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–µ—Ä–∞
PARSER_TIMEOUT=30
PARSER_MAX_RETRIES=3

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
MAX_COMPETITORS_PER_PAGE=10
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ –≤ Telegram

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/add` - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–µ–∑–¥
- `/stats` - –ú–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/best` - –û–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥
- `/best_today` - –†–µ–π—Ç–∏–Ω–≥ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–µ–∑–¥–∞**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º `/add`
   - –í—ã–±–∏—Ä–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –í—ã–±–∏—Ä–∞–µ–º –¥–∞—Ç—É –∑–∞–µ–∑–¥–∞
   - –í—ã–±–∏—Ä–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–µ–∑–¥
   - –í—ã–±–∏—Ä–∞–µ–º –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç–∞

2. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º `/stats`
   - –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–µ–∑–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–∞–∂–¥–æ–≥–æ –∑–∞–µ–∑–¥–∞

3. **–†–µ–π—Ç–∏–Ω–≥**:
   - `/best` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª—É—á—à–∏—Ö –≥–æ–Ω—â–∏–∫–æ–≤ –ø–æ –ª—É—á—à–µ–º—É –∫—Ä—É–≥—É
   - `/best_today` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª—É—á—à–∏—Ö –∑–∞ —Å–µ–≥–æ–¥–Ω—è

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–ª–æ–∫–∞–ª—å–Ω–æ)
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
tail -f logs/bot.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" logs/bot.log

# –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
grep "user_id: 123456789" logs/bot.log
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (Docker)
```bash
# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
./scripts/manage.sh logs

# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./scripts/manage.sh logs-f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
python3 scripts/health_check.py
```

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
```
üè• –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è CartingBot...
==================================================
üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞...
   ‚úÖ –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
   
üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞...
   ‚úÖ –ü–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç (23 –¥–Ω—è)
   
üóÑÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
   ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç (125 –∑–∞–ø–∏—Å–µ–π)
   
üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥ —Ñ–∞–π–ª–∞...
   ‚úÖ –õ–æ–≥ —Ñ–∞–π–ª –∞–∫—Ç—É–∞–ª–µ–Ω
   
==================================================
‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
```

## –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
```bash
# –ß–µ—Ä–µ–∑ Docker
./scripts/manage.sh backup

# –õ–æ–∫–∞–ª—å–Ω–æ
mkdir -p backups
cp data/races.db backups/races_backup_$(date +%Y%m%d_%H%M%S).db
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
./scripts/manage.sh stop  # Docker
# –∏–ª–∏ Ctrl+C –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑—É
cp backups/races_backup_20240101_120000.db data/races.db

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
./scripts/manage.sh start  # Docker
./run_bot.sh                # –õ–æ–∫–∞–ª—å–Ω–æ
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª
cat .env | grep BOT_TOKEN

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ BotFather
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å /mybots –≤ @BotFather
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä—Å–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞
curl -I https://mayak.kartchrono.com/archive/

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–µ—Ä
python3 scripts/test_bot.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
./scripts/manage.sh stop

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –±–∞–∑—ã
ls -la data/races.db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./scripts/manage.sh start
```

---

üí° **–°–æ–≤–µ—Ç**: –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º. 